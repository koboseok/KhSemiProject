<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>


<!--전체 게시글 수 조회 -->
<entry key ="getfListCount">
SELECT COUNT(*) FROM F_VIEW
WHERE FR_FL ='N'
</entry>


<!-- 게시물 목록 조회 -->
<entry key="selectFBoardList">
SELECT * FROM 
(SELECT ROWNUM RNUM, V.* FROM
    (SELECT * FROM FREE_BOARD
    JOIN MEMBER USING(MEM_NO)
    WHERE FR_FL = 'N'
    AND MEM_GRADE = 'G'
    ORDER BY FR_NO DESC) V)
WHERE RNUM BETWEEN ? AND ?
</entry>


<!--게시물 상세 조회 -->
<entry key="selectFBoard">
SELECT * FROM FREE_BOARD
JOIN MEMBER USING(MEM_NO)
WHERE FR_NO = ?
AND FR_FL = 'N'
</entry>

<!-- 조회수 증가  -->
<entry key="increaseReadCount">
UPDATE FREE_BOARD SET
FR_READ_COUNT = FR_READ_COUNT+1
WHERE FR_NO =?
</entry>


<!--다음글 조회  -->
<entry key="selectFNextNo">
SELECT SEQ_FBNO.NEXTVAL FROM DUAL
</entry>

<!-- 게시글 삽입 -->
<entry key="insertFBoard">
INSERT INTO FREE_BOARD (FR_NO, FR_TITLE, FR_CONTENT, MEM_NO)
VALUES(?,?,?,?)
</entry>


<!--파일 정보 삽입 -->
<entry key="insertAttachment">
INSERT INTO FREE_BOARD_IMG
VALUES(SEQ_FFNO.NEXTVAL, ?, ?, ?, ?)
</entry>

<!-- 게시글에 포함된 이미지 목록 조회 -->
<entry key="selectFBoardFiles">
SELECT FR_IMG_NO, FR_IMG_NAME, FR_IMG_LV, FR_PATH 
FROM FREE_BOARD_IMG
WHERE FR_NO = ?
ORDER BY FR_IMG_LV
</entry>

<!-- 썸네일 목록 조회 -->
<entry key="selectThumbnailList">
SELECT * FROM FREE_BOARD_IMG
WHERE FR_NO 
IN (SELECT FR_NO FROM 
    (SELECT ROWNUM RNUM, V.* FROM
        (SELECT FR_NO FROM F_VIEW
        WHERE FR_FL = 'N'
        ORDER BY FR_NO DESC) V)
WHERE RNUM BETWEEN ? AND ?)
AND FR_IMG_LV = 0
</entry>

<!-- 게시글 수정 -->
<entry key="updateFBoard">
UPDATE FREE_BOARD SET
FR_TITLE = ?,
FR_CONTENT = ?,
FR_M_DT = SYSDATE
WHERE FR_NO = ?
</entry>

<!-- 파일 정보 수정 -->
<entry key="updateAttachment">
UPDATE FR_BOARD_IMG SET
FR_PATH = ?,
FR_IMG_NM = ?
WHERE FR_IMG_NO = ?
</entry>

<!--삭제 -->
<entry key="deleteFBoard">
UPDATE FREE_BOARD SET
FR_FL = 'Y'
WHERE FR_NO = ?
</entry>


</properties>
