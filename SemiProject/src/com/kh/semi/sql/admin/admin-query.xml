<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>

<!-- 일반 회원 수 조회-->
<entry key="getListCount">
SELECT COUNT(*) FROM MEMBER
WHERE MEM_STATUS = 'Y' AND MEM_GRADE = 'G'
</entry>

<!-- 회원 목록 조회 -->
<entry key="selectMemberList">
SELECT * FROM
	(SELECT ROWNUM RNUM, V.*
	FROM
	(SELECT * FROM MEMBER WHERE MEM_STATUS = 'Y' AND MEM_GRADE = 'G' ORDER BY MEM_NO DESC) V)
WHERE RNUM BETWEEN ? AND ?
</entry>

<!-- 구독서비스 한 줄로 뽑아내는 쿼리문 -->
<entry key="addSubList">
SELECT LISTAGG(SERV_NM, ', ') WITHIN GROUP (ORDER BY SERV_NM) 
FROM ADMIN_VIEW WHERE MEM_NO = ?
</entry>

<!-- 정지회원으로 전환 -->
<entry key="updateGradeB">
UPDATE MEMBER SET MEM_GRADE = 'B' 
WHERE MEM_NO = ?
</entry>

<!-- 신고 내용 입력 -->
<entry key="reportMember">
INSERT INTO REPORT 
VALUES(SEQ_RNO.NEXTVAL, ?, ?, ?, ?, ?, ?)
</entry>

<!-- 불량 회원 수 조회-->
<entry key="getbPageInfo">
SELECT COUNT(*) FROM MEMBER
WHERE MEM_STATUS = 'Y' AND MEM_GRADE = 'B'
</entry>

<!-- 불량회원 목록 조회 -->
<entry key="selectBmemberList">
SELECT * FROM
	(SELECT ROWNUM RNUM, V.*
	FROM
	(SELECT REPORT_NO, MEM_NO, MEM_NM, MEM_EMAIL, BOARD_CODE, REPORT_B_C_NO, REPORT_B_NO, REPORT_REASON, REPORT_DT
    FROM REPORT
    LEFT JOIN MEMBER USING(MEM_NO)
    WHERE MEM_STATUS = 'Y' AND MEM_GRADE = 'B') V)
WHERE RNUM BETWEEN ? AND ?
ORDER BY RNUM DESC
</entry>

<!-- 불량회원에서 일반회원으로 전환 -->
<entry key="convertMember">
UPDATE MEMBER SET MEM_GRADE = 'G'
WHERE MEM_NO = ?
</entry>

</properties>
